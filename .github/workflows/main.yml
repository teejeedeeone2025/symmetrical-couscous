- name: Setup Chrome Profile
  run: |
    # Download profile from your GitHub repo
    wget -q https://github.com/teejeedeeone2025/studious-winner/raw/main/my_google_profile.tar.gz
    
    # Create directory and extract with correct structure
    mkdir -p my_google_profile
    tar -xzf my_google_profile.tar.gz -C my_google_profile
    
    # Verify the extracted structure - CRITICAL CHECKS
    echo "üîç Checking profile contents..."
    
    # Check for Google Profile Picture (indicates real user profile)
    if [ -f "my_google_profile/google-chrome/Default/Google Profile Picture.png" ]; then
        echo "‚úÖ Google Profile Picture found - real user profile"
    else
        echo "‚ùå Google Profile Picture missing"
    fi
    
    # Check for Cookies file
    if [ -f "my_google_profile/google-chrome/Default/Cookies" ]; then
        echo "‚úÖ Cookies file found"
    else
        echo "‚ùå Cookies file missing"
    fi
    
    # Check for key profile files
    echo "üìÅ Important profile files:"
    ls -la my_google_profile/google-chrome/Default/ | grep -E "(Cookies|Local State|Login Data|Profile Picture)" || echo "No key files found"
    
    # Clean up
    rm my_google_profile.tar.gz
